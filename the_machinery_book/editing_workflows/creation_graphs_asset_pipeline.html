<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Creation graphs and asset pipeline - The Machinery Book</title>
                

        <!-- Custom HTML head -->
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

                <link rel="icon" href="../favicon.svg">
                        <link rel="shortcut icon" href="../favicon.png">
                <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
                <link rel="stylesheet" href="../css/print.css" media="print">
        
        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
                <link rel="stylesheet" href="../fonts/fonts.css">
        
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
            </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../index.html"><strong aria-hidden="true">1.</strong> Welcome</a></li><li class="chapter-item expanded "><a href="../what_is_the_machinery.html"><strong aria-hidden="true">2.</strong> What is The Machinery</a></li><li class="chapter-item expanded "><a href="../licenses.html"><strong aria-hidden="true">3.</strong> Licenses</a></li><li class="chapter-item expanded "><a href="../getting_started/index.html"><strong aria-hidden="true">4.</strong> Getting Started</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../getting_started/what_is_in_the_package.html"><strong aria-hidden="true">4.1.</strong> What is in this package</a></li><li class="chapter-item expanded "><a href="../getting_started/logging_in.html"><strong aria-hidden="true">4.2.</strong> Sign In</a></li><li class="chapter-item expanded "><a href="../getting_started/new_project.html"><strong aria-hidden="true">4.3.</strong> New Project</a></li><li class="chapter-item expanded "><a href="../getting_started/first_gameplay_project.html"><strong aria-hidden="true">4.4.</strong> First Gameplay Project</a></li><li class="chapter-item expanded "><a href="../getting_started/sample-projects.html"><strong aria-hidden="true">4.5.</strong> Sample Projects</a></li><li class="chapter-item expanded "><a href="../getting_started/troubleshooting.html"><strong aria-hidden="true">4.6.</strong> Troubleshooting</a></li><li class="chapter-item expanded "><a href="../getting_started/migration_from_unity.html"><strong aria-hidden="true">4.7.</strong> The Machinery for Unity Dev's</a></li><li class="chapter-item expanded "><a href="../getting_started/migration_from_unreal.html"><strong aria-hidden="true">4.8.</strong> The Machinery for Unreal 4 Dev's</a></li></ol></li><li class="chapter-item expanded "><a href="../the_editor/index.html"><strong aria-hidden="true">5.</strong> The Editor</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../the_editor/tabs.html"><strong aria-hidden="true">5.1.</strong> About Tabs</a></li><li class="chapter-item expanded "><a href="../the_editor/entity_tree_tab.html"><strong aria-hidden="true">5.2.</strong> Entity Tree Tab</a></li><li class="chapter-item expanded "><a href="../the_editor/scene_tab.html"><strong aria-hidden="true">5.3.</strong> Scene Tab</a></li><li class="chapter-item expanded "><a href="../the_editor/properties_tab.html"><strong aria-hidden="true">5.4.</strong> Properties Tab</a></li><li class="chapter-item expanded "><a href="../the_editor/asset_browser.html"><strong aria-hidden="true">5.5.</strong> Asset Browser</a></li><li class="chapter-item expanded "><a href="../the_editor/simulate_tab.html"><strong aria-hidden="true">5.6.</strong> Simulate Tab</a></li><li class="chapter-item expanded "><a href="../the_editor/preview_tab.html"><strong aria-hidden="true">5.7.</strong> Preview Tab</a></li></ol></li><li class="chapter-item expanded "><a href="../editing_workflows/index.html"><strong aria-hidden="true">6.</strong> Editing Workflows</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../editing_workflows/entities.html"><strong aria-hidden="true">6.1.</strong> Entities</a></li><li class="chapter-item expanded "><a href="../editing_workflows/creation_graphs_asset_pipeline.html" class="active"><strong aria-hidden="true">6.2.</strong> Creation graphs and asset pipeline</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../editing_workflows/import_assets.html"><strong aria-hidden="true">6.2.1.</strong> Importing Assets</a></li></ol></li><li class="chapter-item expanded "><a href="../editing_workflows/prototypes.html"><strong aria-hidden="true">6.3.</strong> Prototypes</a></li><li class="chapter-item expanded "><a href="../editing_workflows/simulation.html"><strong aria-hidden="true">6.4.</strong> Simulation</a></li><li class="chapter-item expanded "><a href="../editing_workflows/visual-scripting.html"><strong aria-hidden="true">6.5.</strong> Visual Scripting: Entity Graphs</a></li><li class="chapter-item expanded "><a href="../editing_workflows/physics.html"><strong aria-hidden="true">6.6.</strong> Physics</a></li><li class="chapter-item expanded "><a href="../editing_workflows/animation/index.html"><strong aria-hidden="true">6.7.</strong> Animation</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../editing_workflows/animation/animation-state-machine.html"><strong aria-hidden="true">6.7.1.</strong> Animation state machines</a></li></ol></li><li class="chapter-item expanded "><a href="../editing_workflows/sound.html"><strong aria-hidden="true">6.8.</strong> Sound</a></li><li class="chapter-item expanded "><a href="../editing_workflows/publish.html"><strong aria-hidden="true">6.9.</strong> Publish</a></li></ol></li><li class="chapter-item expanded "><a href="../collaboration.html"><strong aria-hidden="true">7.</strong> Collaboration</a></li><li class="chapter-item expanded "><a href="../the_truth/index.html"><strong aria-hidden="true">8.</strong> The Truth</a></li><li class="chapter-item expanded "><a href="../extending_the_machinery/index.html"><strong aria-hidden="true">9.</strong> Extending The Machinery</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../extending_the_machinery/the_plugin_system.html"><strong aria-hidden="true">9.1.</strong> The Plugin System</a></li><li class="chapter-item expanded "><a href="../extending_the_machinery/hot-reloading.html"><strong aria-hidden="true">9.2.</strong> Hot-reloading</a></li><li class="chapter-item expanded "><a href="../extending_the_machinery/plugin-assets.html"><strong aria-hidden="true">9.3.</strong> Plugin assets</a></li><li class="chapter-item expanded "><a href="../extending_the_machinery/write-a-plugin.html"><strong aria-hidden="true">9.4.</strong> Writing a plugin</a></li><li class="chapter-item expanded "><a href="../the_truth/custom_truth_type.html"><strong aria-hidden="true">9.5.</strong> Create a custom Truth Type</a></li></ol></li><li class="chapter-item expanded "><a href="../gameplay_coding/index.html"><strong aria-hidden="true">10.</strong> Gameplay coding</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../gameplay_coding/simulate_entry.html"><strong aria-hidden="true">10.1.</strong> Simulate Entry in C</a></li><li class="chapter-item expanded "><a href="../gameplay_coding/extend_the_visual_scripting_language.html"><strong aria-hidden="true">10.2.</strong> Extending the visual scripting language</a></li><li class="chapter-item expanded "><a href="../gameplay_coding/ecs/index.html"><strong aria-hidden="true">10.3.</strong> Entity Component System</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../gameplay_coding/ecs/write_a_custom_component.html"><strong aria-hidden="true">10.3.1.</strong> Write a custom component</a></li><li class="chapter-item expanded "><a href="../gameplay_coding/ecs/write_a_system_or_engine.html"><strong aria-hidden="true">10.3.2.</strong> Write a Systems &amp; Engines</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../qa_pipeline/index.html"><strong aria-hidden="true">11.</strong> QA Pipeline</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../qa_pipeline/how_to_write_unit_tests.html"><strong aria-hidden="true">11.1.</strong> Write your own unit tests</a></li><li class="chapter-item expanded "><a href="../qa_pipeline/how_to_write_integration_tests.html"><strong aria-hidden="true">11.2.</strong> Write your own integration tests</a></li></ol></li><li class="chapter-item expanded "><a href="../helper_tools/index.html"><strong aria-hidden="true">12.</strong> Helper Tools</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../helper_tools/tmbuild.html"><strong aria-hidden="true">12.1.</strong> How to use tmbuild</a></li><li class="chapter-item expanded "><a href="../helper_tools/hash.html"><strong aria-hidden="true">12.2.</strong> How to use hash</a></li></ol></li><li class="chapter-item expanded "><a href="../writing_an_executable.html"><strong aria-hidden="true">13.</strong> Writing an executable</a></li></ol>            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                                                <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                                            </div>

                    <h1 class="menu-title">The Machinery Book</h1>

                    <div class="right-buttons">
                                                <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                                                                        
                    </div>
                </div>

                                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h2 id="creation-graphs-and-asset-pipeline"><a class="header" href="#creation-graphs-and-asset-pipeline">Creation graphs and asset pipeline</a></h2>
<p>There are lots of things you might want to do to an imported asset coming from a DCC-tool. For
example, extracting images and materials into a representation that can be further tweaked by your
artists or rigging an entity from the meshes present in the asset. In The Machinery, we provide full
control over how data enters the engine and what data-processing steps that get executed, allowing
technical artists to better optimize content and setup custom, game-specific asset pipelines.</p>
<p>This is handled through <em>Creation Graphs</em>. A <em>Creation Graph</em> is essentially a generic framework for
processing arbitrary data on the CPUs and GPUs, exposed through a graph front-end view. While we can
use <em>Creation Graphs</em> for any type of data processing, we will for the rest of this section be
focusing on how to set up a simple entity from an imported <code>dcc_asset</code>. If you wish to see other use
cases such as particle systems, sky rendering and sprite sheets, then have a look in the
<code>creation_graphs</code> sample that we provide.</p>
<h1 id="importing-a-dcc-asset"><a class="header" href="#importing-a-dcc-asset">Importing a DCC asset</a></h1>
<p>You can import an asset by selecting <strong>File &gt; Import...</strong> in the main menu, pressing <strong>Ctrl-I</strong>, or dropping a DCC file on the Asset Browser tab. When you do this, it ends up in our data-model as a <code>dcc_asset</code>. A <code>dcc_asset</code> can hold all types of data that was used to build the asset in the DCC-tool, such as objects, images, materials, geometry and animation data.</p>
<p>During the import step, The Machinery only runs a bare minimum of data processing, just enough so that we can display a visual representation of the asset in the <em>Preview</em> tab. Imports run in the background so you can continue to work uninterrupted. When the import finishes the asset will show up in the <em>Asset Browser</em>. Note that import of large assets can take a significant amount of time. You can monitor the progress of the import operation in the status bar.</p>
<p>For more in detail explanation about how to import assets checkout the <a href="/the_machinery_book/editing_workflows/import_assets.html">Asset Import Part</a>.</p>
<h3 id="basic-entity-rigging-with-image-and-material-extraction"><a class="header" href="#basic-entity-rigging-with-image-and-material-extraction">Basic entity rigging, with image and material extraction</a></h3>
<p>If you click on a <code>dcc_asset</code> that contains a mesh in the Asset Browser, you will be presented
with importer settings in the Properties tab:</p>
<p><img src="https://www.dropbox.com/s/n6njdkl84dzem8n/dcc-asset-before-entity-rig.png?dl=1" alt="Inspecting a dcc_asset" /></p>
<p>The Preview tab does just enough to show you what the <code>dcc_asset</code> contains, but what you probably
want is an <code>entity</code> that contains child entities representing the meshes found inside the
<code>dcc_asset</code>. Also, you probably want it to extract the images and materials from the <code>dcc_asset</code> so
you can continue to tweak those inside The Machinery. There are two ways to do this. Either you drag
the DCC asset onto the <em>Scene Tab</em>, or you click the <em>Import Asset</em> button. The <em>Import Assets</em>
button will automatically create a prototype Entity Asset in your project, while dropping it into
the scene will rig the entity inside the scene, without creating a prototype.</p>
<p>In either case, we will for our <code>door.dcc_asset</code> get a <code>door.resources</code> directory next to it. This
directory will contain materials and images extracted from the DCC asset. If you prefer dropping
the assets into the scene directly, but also want an entity prototype, then you can check the
<code>Create Prototype on Drop</code> check box.</p>
<p>Each image and material in the resources folder is a <em>Creation Graph</em>, which is responsible for the
data-processing of those resources. You can inspect these graphs to see what each one does. They are
described in more detail below.</p>
<iframe frameborder="0" scrolling="no" marginheight="0" marginwidth="0"width="788.54" height="443" type="text/html" src="https://www.youtube.com/embed/loaYaeSl-_g?autoplay=0&fs=0&iv_load_policy=3&showinfo=0&rel=0&cc_load_policy=0&start=0&end=0&origin=ourmachinery.com"></iframe>
<h3 id="creation-graphs-for-dcc_asset-import"><a class="header" href="#creation-graphs-for-dcc_asset-import">Creation Graphs for <code>dcc_asset</code> import</a></h3>
<p>In The Machinery, there are no specific asset types for images or materials, instead, we only have
<em>Creation Graphs</em> (<code>.creation</code> assets). To extract data from a <code>dcc_asset</code> in a creation graph, the
<code>dcc_asset</code>-plugin exposes a set of helper nodes in the <em>DCC Asset</em> category:</p>
<ul>
<li>
<p><code>DCC Asset/DCC Image</code> -- Takes the source <code>dcc_asset</code> together with the name of the image as input
and outputs a <code>GPU Image</code> that can be wired into various data processing nodes (such as mipmap
generation through the <code>Image/Filter Image</code> node) or directly to a shader node.</p>
</li>
<li>
<p><code>DCC Asset/DCC Material</code> -- Takes the source <code>dcc_asset</code> together with the name of the material as
input and outputs all properties of the material model found inside the <code>dcc_asset</code>. This material
representation is a close match to GLTF 2.0's PBR material model. Image outputs are references to
other <code>.creation</code> assets which in turn output <code>GPU Images</code>.</p>
</li>
<li>
<p><code>DCC Asset/DCC Mesh</code> -- Takes the source <code>dcc_asset</code> together with the name of the mesh as input
and outputs a <code>GPU Geometry</code> that can be wired to an <code>Output/Draw Call</code> output node for rendering
together with the minimum and maximum extents of the geometry that can be wired to an
<code>Output/Bounding Volume</code> output node for culling.</p>
</li>
</ul>
<p>The steps for extracting images and material <code>.creation</code> assets from a <code>dcc_asset</code> involve deciding
what data-processing should be done to the data before it gets wired to an output node of the graph.
This can either be done by manually assembling creation graphs for each image and material, or by
building a generic creation graph for each asset <em>type</em> and use that as a prototype when running a
batch processing step we refer to as <em>Resource Extraction</em>.</p>
<p>Here's an example of what a generic creation graph prototype for extracting images might look like:</p>
<p><img src="https://www.dropbox.com/s/z2e3s5w1h8yiv1k/image-cg.png?dl=1" alt="Simple image processing." /></p>
<p>To quickly get up and running we provide a number of pre-authored creation graphs for some of the
more common operations:</p>
<ul>
<li>
<p><code>import-image</code>-- Operations applied to images imported directly into the editor (not as part of a
<code>dcc-asset</code>).</p>
</li>
<li>
<p><code>dcc-image</code> -- Operations applied to images extracted from an imported <code>dcc_asset</code>.</p>
</li>
<li>
<p><code>dcc-material</code> -- Shader graph setup to represent materials extracted from an imported <code>dcc_asset</code>.</p>
</li>
<li>
<p><code>dcc-mesh</code> -- Operations for generating a draw call that reprensents a mesh from an imported <code>dcc_asset</code>.</p>
</li>
<li>
<p><code>drop-image</code> -- Operations for generating a draw call to display the image output of another
creation graph in the context of an entity, making it possible to drag-and-drop images into the
Scene Tab.</p>
</li>
</ul>
<p>These pre-authored creation graphs are shipped as part of our Core project which is automatically
copied into new projects. How they are used when working with assets is exposed through the
<code>import_settings</code> asset:</p>
<p><img src="https://www.dropbox.com/s/sr52qac8i1i757l/import-settings.png?dl=1" alt="Default Import Settings." /></p>
<p>By exposing these settings through an asset it is possible to easily change the default behavior of
how imported assets are treated when placed under a specific folder. It's worth noting that this is
somewhat of a power-user feature and not something you need to have a detailed
understanding of to get started working with The Machinery.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                                                    <a rel="prev" href="../editing_workflows/entities.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        
                                                    <a rel="next" href="../editing_workflows/import_assets.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                                    <a rel="prev" href="../editing_workflows/entities.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                
                                    <a rel="next" href="../editing_workflows/import_assets.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                            </nav>

        </div>

        
        
        
                <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        
        
                <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        
        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
        
    </body>
</html>
